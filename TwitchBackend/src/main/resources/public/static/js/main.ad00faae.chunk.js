(this.webpackJsonptwitchfe=this.webpackJsonptwitchfe||[]).push([[0],{135:function(e,t,a){e.exports=a(173)},142:function(e,t,a){},173:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(122),c=a.n(l),s=(a(142),a(175)),o=a(131),i=a(183),m=a(191),u=a(192);const d="".concat("","/login"),h="".concat("","/register"),E="".concat("","/logout"),g="".concat("","/game"),p="".concat("","/game?game_name="),f="".concat("","/search?game_id="),y=e=>fetch("".concat(f).concat(e)).then(e=>{if(200!==e.status)throw Error("Fail to find the game");return e.json()}),b=e=>(e=>fetch("".concat(p).concat(e)).then(e=>{if(200!==e.status)throw Error("Fail to find the game");return e.json()}))(e).then(e=>{if(e&&e[0].id)return y(e[0].id);throw Error("Fail to find the game")}),v="".concat("","/favorite"),w=e=>fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({favorite:e})}).then(e=>{if(200!==e.status)throw Error("Fail to add favorite item")}),S=e=>fetch(v,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({favorite:e})}).then(e=>{if(200!==e.status)throw Error("Fail to delete favorite item")}),F=()=>fetch(v,{credentials:"include"}).then(e=>{if(200!==e.status)throw Error("Fail to get favorite item");return e.json()}),k="".concat("","/recommendation");var C=a(176),O=a(177),I=a(66);var P=function(e){let{items:t}=e;return null===t||void 0===t?void 0:t.map(e=>n.a.createElement(i.a.Item,{key:e.id},n.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},"".concat(e.broadcaster_name," - ").concat(e.title))))},_=a(184),j=a(185),x=a(133),T=a(186),R=a(187);const{SubMenu:L}=i.a;var q=function(e){let{favoriteItems:t}=e;const[a,l]=Object(r.useState)(!1),{videos:c,streams:s,clips:o}=t;return n.a.createElement(n.a.Fragment,null,n.a.createElement(I.a,{type:"primary",shape:"round",onClick:()=>{l(!0)},icon:n.a.createElement(j.a,null)},"My Favorites"),n.a.createElement(_.a,{title:"My Favorites",placement:"right",width:720,visible:a,onClose:()=>{l(!1)}},n.a.createElement(i.a,{mode:"inline",defaultOpenKeys:["streams"],style:{height:"100%",borderRight:0},selectable:!1},n.a.createElement(L,{key:"streams",icon:n.a.createElement(x.a,null),title:"Streams"},n.a.createElement(P,{items:s})),n.a.createElement(L,{key:"videos",icon:n.a.createElement(T.a,null),title:"Videos"},n.a.createElement(P,{items:c})),n.a.createElement(L,{key:"clips",icon:n.a.createElement(R.a,null),title:"Clips"},n.a.createElement(P,{items:o})))))},J=a(182),N=a(179),M=a(181),U=a(188),D=a(189);var V=function(){const[e,t]=Object(r.useState)(!1);return n.a.createElement(n.a.Fragment,null,n.a.createElement(I.a,{shape:"round",type:"primary",onClick:()=>{t(!0)}},"Register"),n.a.createElement(J.a,{title:"Register",visible:e,onCancel:()=>{t(!1)},footer:null,destroyOnClose:!0},n.a.createElement(N.a,{name:"normal_register",initialValues:{remember:!0},onFinish:e=>{(e=>fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{if(200!==e.status)throw Error("Fail to register")}))(e).then(()=>{t(!1),o.b.success("Successfully signed up")}).catch(e=>{o.b.error(e.message)})},preserve:!1},n.a.createElement(N.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}]},n.a.createElement(M.a,{prefix:n.a.createElement(U.a,null),placeholder:"Username"})),n.a.createElement(N.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},n.a.createElement(M.a,{prefix:n.a.createElement(D.a,null),placeholder:"Password"})),n.a.createElement(N.a.Item,{name:"first_name",rules:[{required:!0,message:"Please input your Firstname!"}]},n.a.createElement(M.a,{placeholder:"firstname"})),n.a.createElement(N.a.Item,{name:"last_name",rules:[{required:!0,message:"Please input your Lastname!"}]},n.a.createElement(M.a,{placeholder:"lastname"})),n.a.createElement(N.a.Item,null,n.a.createElement(I.a,{type:"primary",htmlType:"submit"},"Register")))))};var A=function(e){let{onSuccess:t}=e;const[a,l]=Object(r.useState)(!1);return n.a.createElement(n.a.Fragment,null,n.a.createElement(I.a,{shape:"round",onClick:()=>{l(!0)},style:{marginRight:"20px"}},"Login"),n.a.createElement(J.a,{title:"Log in",visible:a,onCancel:()=>{l(!1)},footer:null,destroyOnClose:!0},n.a.createElement(N.a,{name:"normal_login",onFinish:e=>{(e=>{const t=new FormData;return t.append("username",e.username),t.append("password",e.password),fetch(d,{method:"POST",credentials:"include",body:t}).then(e=>{if(204!==e.status)throw Error("Fail to log in")})})(e).then(()=>{l(!1),o.b.success("Welcome back"),t()}).catch(e=>{o.b.error(e.message)})},preserve:!1},n.a.createElement(N.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}]},n.a.createElement(M.a,{prefix:n.a.createElement(U.a,null),placeholder:"Username"})),n.a.createElement(N.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},n.a.createElement(M.a.Password,{prefix:n.a.createElement(D.a,null),placeholder:"Password"})),n.a.createElement(N.a.Item,null,n.a.createElement(I.a,{type:"primary",htmlType:"submit"},"Login")))))};const{Header:B}=s.a;var G=function(e){let{loggedIn:t,signoutOnClick:a,signinOnSuccess:r,favoriteItems:l}=e;return n.a.createElement(B,null,n.a.createElement(C.a,{justify:"space-between"},n.a.createElement(O.a,null,t&&n.a.createElement(q,{favoriteItems:l})),n.a.createElement(O.a,null,t&&n.a.createElement(I.a,{shape:"round",onClick:a},"Logout"),!t&&n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{onSuccess:r}),n.a.createElement(V,null)))))},H=a(112);var K=function(e){let{onSuccess:t}=e;const[a,l]=Object(r.useState)(!1);return n.a.createElement(n.a.Fragment,null,n.a.createElement(I.a,{shape:"round",onClick:()=>{l(!0)},icon:n.a.createElement(H.a,null),style:{marginLeft:"20px",marginTop:"20px"}},"Custom Search"),n.a.createElement(J.a,{title:"Search",visible:a,onCancel:()=>{l(!1)},footer:null},n.a.createElement(N.a,{name:"custom_search",onFinish:e=>{b(e.game_name).then(e=>{l(!1),t(e)}).catch(e=>{o.b.error(e.message)})}},n.a.createElement(N.a.Item,{name:"game_name",rules:[{required:!0,message:"Please enter a game name"}]},n.a.createElement(M.a,{placeholder:"Game name"})),n.a.createElement(N.a.Item,null,n.a.createElement(I.a,{type:"primary",htmlType:"submit"},"Search")))))},W=a(128),z=a(103),Q=a(178),X=a(180),Y=a(190);const{TabPane:Z}=W.a,$="stream",ee="videos",te="clips",ae=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;const l="".concat(e.broadcaster_name," - ").concat(e.title),c=a.find(t=>t.twitch_id===e.twitch_id),s=()=>{c?S(e).then(()=>{r()}).catch(e=>{o.b.error(e.message)}):w(e).then(()=>{r()}).catch(e=>{o.b.error(e.message)})};return n.a.createElement(n.a.Fragment,null,t&&n.a.createElement(z.a,{title:c?"Remove from favorite list":"Add to favorite list"},n.a.createElement(I.a,{shape:"circle",icon:c?n.a.createElement(j.a,null):n.a.createElement(Y.a,null),onClick:s})),n.a.createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis",width:450}},n.a.createElement(z.a,{title:l},n.a.createElement("span",null,l))))},re=(e,t,a,r)=>n.a.createElement(Q.b,{grid:{xs:1,sm:2,md:4,lg:4,xl:6},dataSource:e,renderItem:e=>{return n.a.createElement(Q.b.Item,{style:{marginRight:"20px"}},n.a.createElement(X.a,{title:ae(e,t,a,r)},n.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{width:"100%",height:"100%"}},n.a.createElement("img",{alt:"Placeholder",src:(l=e.thumbnail_url,l.replace("%{height}","252").replace("%{width}","480").replace("{height}","252").replace("{width}","480")),style:{width:"100%",height:"100%"}}))));var l}});var ne=e=>{let{resources:t,loggedIn:a,favoriteItems:r,favoriteOnChange:l}=e;const{videos:c,streams:s,clips:o}=t,{videos:i,streams:m,clips:u}=r;return n.a.createElement(W.a,{defaultActiveKey:$},n.a.createElement(Z,{tab:"Streams",key:$,forceRender:!0},re(s,a,m,l)),n.a.createElement(Z,{tab:"Videos",key:ee,forceRender:!0},re(c,a,i,l)),n.a.createElement(Z,{tab:"Clips",key:te,forceRender:!0},re(o,a,u,l)))};const{Header:le,Content:ce,Sider:se}=s.a;var oe=function(){const[e,t]=Object(r.useState)(!1),[a,l]=Object(r.useState)([]),[c,d]=Object(r.useState)([]),[h,p]=Object(r.useState)({videos:[],streams:[],clips:[]});return Object(r.useEffect)(()=>{fetch(g).then(e=>{if(200!==e.status)throw Error("Fail to get top games");return e.json()}).then(e=>{d(e)}).catch(e=>{o.b.error(e.message)})},[]),n.a.createElement(s.a,null,n.a.createElement(le,null,n.a.createElement(G,{loggedIn:e,signoutOnClick:()=>{fetch(E,{method:"POST",credentials:"include"}).then(e=>{if(204!==e.status)throw Error("Fail to log out")}).then(()=>{t(!1),o.b.success("Successfully Signed out")}).catch(e=>{o.b.error(e.message)})},signinOnSuccess:()=>{t(!0),F().then(e=>{l(e)})},favoriteItems:a})),n.a.createElement(s.a,null,n.a.createElement(se,{width:300,className:"site-layout-background"},n.a.createElement(K,{onSuccess:e=>{p(e)}}),n.a.createElement(i.a,{mode:"inline",onSelect:e=>{let{key:t}=e;"recommendation"!==t?y(t).then(e=>{p(e)}):fetch(k,{credentials:"include"}).then(e=>{if(200!==e.status)throw Error("Fail to get recommended item");return e.json()}).then(e=>{p(e)})},style:{marginTop:"10px"},items:(e=>[{label:"Recommend for you!",key:"recommendation",icon:n.a.createElement(m.a,null)},{label:"Popular Games",key:"popular_games",icon:n.a.createElement(u.a,null),children:e.map(e=>({label:e.name,key:e.id,icon:n.a.createElement("img",{alt:"placeholder",src:e.box_art_url.replace("{height}","40").replace("{width}","40"),style:{borderRadius:"50%",marginRight:"20px"}})}))}])(c)})),n.a.createElement(s.a,{style:{padding:"24px"}},n.a.createElement(ce,{className:"site-layout-background",style:{padding:24,margin:0,height:800,overflow:"auto"}},n.a.createElement(ne,{resources:h,loggedIn:e,favoriteOnChange:()=>{F().then(e=>{l(e)}).catch(e=>{o.b.error(e.message)})},favoriteItems:a})))))};var ie=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,193)).then(t=>{let{getCLS:a,getFID:r,getFCP:n,getLCP:l,getTTFB:c}=t;a(e),r(e),n(e),l(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(oe,null))),ie()}},[[135,1,2]]]);
//# sourceMappingURL=main.ad00faae.chunk.js.map